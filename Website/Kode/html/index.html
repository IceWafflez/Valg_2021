<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <title>Valg</title>
</head>
<body>
    <div class="TopTitle">
        <p>Elev valg 2021</p>
    </div>
    <div class="NavBar">
        <ul>
            <a href="../html/index.html">Stem</a>
            <a href="../html/Hvordanstemme.html">Hvordan-Stemme</a>
            <a href="../html/Credits.html">Credits</a>
        </ul>
    </div>
    <hr>
    <div class="Kanditater">
        <ul class="Kanditater-Content">
            <div class="StemPopup" id="PopUpbox">
                <p class="PopUpTitle">Stem</p>
                <select class="DropDownBox" name="KanditatValg" id="KanditatDropBox">
                    <option value="Jame">Jame</option>
                    <option value="Andreas">Andreas</option>
                    <option value="Lars">Lars</option>
                    <option value="Sondre">Sondre</option>
                    <option value="Simen">Simen</option>
                    <option value="Dino">Dino</option>
                  </select>
                <input type="text" id="TokenInput" name="fname"><br><br>
                <button onclick="OnClick1Button3()" type="button">Send-Stemme</button>
                <button class="StemButton" onclick="OnClick1Button2('IMST')" type="button-stem">X</button>
            </div>
            <p class="Kanditater-Title">Klasse</p>
            <ul class="Klasse-knapper">
                <button onclick="OnClick1Button('IMIT')" type="button">2-IMIT</button>
                <button onclick="OnClick1Button('IMMP')" type="button">2-IMMP</button>
                <button onclick="OnClick1Button('IMST')" type="button">2-IMST</button>
            </ul>
            <script>
                //Person Data
                
                let IMDATA = {
                    IMIT : {
                        1 : [
                            'Jame', 
                            '-Epler er blå',
                            'Image',
                            'fdsdsfs'
                        ],
                        2 : [
                            'Andreas', 
                            'Epler er gul',
                            'Image',
                            'sdassadds'
                        ],
                    },
                    IMMP : {
                        1 : [
                            'Lars', 
                            'Epler er rød',
                            '../../Elementer/Bilder/Image.png',
                            'Bio'
                        ],
                        2 : [
                            'Sondre', 
                            'Epler er gul',
                            'Image',
                            'Bio'
                        ],
                    },
                    IMST : {
                        1 : [
                            'Simen', 
                            'Epler er blå',
                            'Image',
                            'Bio'
                        ],
                        2 : [
                            'Dino', 
                            'Epler er gul',
                            'Image',
                            'Bio'
                        ],
                    },
                };
                let KanditatDictionairy = {
                    1: "Jame",
                    2: "Andreas",
                    3: "Lars",
                    4: "Sondre",
                    5: "Simem",
                    6: "Dino",

                    "Jame": 1,
                    "Andreas": 2,
                    "Lars": 3,
                    "Sondre": 4,
                    "Simen": 5,
                    "Dino": 6
                };
                //Event Procces
                function DisplayInfo(Klasse){
                    // Get Class Data
                    let KlasseData = IMDATA[Klasse]
                    console.log(KlasseData)

                    let Kanditat1 = KlasseData[1]
                    let Kanditat2 = KlasseData[2]

                    console.log(Kanditat1)
                    console.log(Kanditat2)
                    
                    
                    //Set text to display data 1
                    document.getElementById('Navn1').innerHTML = Kanditat1[0];
                    document.getElementById('Slagord1').innerHTML = Kanditat1[1];
                    document.getElementById('Img1').src = Kanditat1[2];
                    document.getElementById('Bio1').innerHTML = Kanditat1[3];
                    //Set text to display data 1
                    document.getElementById('Navn2').innerHTML = Kanditat2[0];
                    document.getElementById('Slagord2').innerHTML = Kanditat2[1];
                    document.getElementById('Img2').src = Kanditat2[2];
                    document.getElementById('Bio2').innerHTML = Kanditat2[3];
                    //Make elements Visible
                    document.getElementById("Kanditat-Titel").style.visibility = "unset";
                    document.getElementById("Navn1").style.visibility = "unset";
                    document.getElementById("Navn2").style.visibility = "unset";
                    document.getElementById("Img1").style.visibility = "unset";
                    document.getElementById("Img2").style.visibility = "unset";
                    document.getElementById("Higlight-Line1").style.visibility = "unset";
                    document.getElementById("Higlight-Line2").style.visibility = "unset";
                }
                let menutoggle = false;
                function ToggleMenu(){
                    menutoggle = !menutoggle
                    if (menutoggle == false){
                        document.getElementById("PopUpbox").style.visibility = "hidden"
                    }
                    else {
                        document.getElementById("PopUpbox").style.visibility = "unset"
                    }
                }
                function OpenStemPage(){
                    ToggleMenu()
                }
                function SendData(Token, KandidatID){
                    var port = 8080
                    var LocalURL = "http://127.0.0.1:"+ port +"/vote";
                    var ServerURL = "http://176.58.106.91:"+ port +"/vote"
                    var formData = new FormData();

                    formData.append("token", Token);
                    formData.append("vote", KandidatID); // number 123456 is immediately converted to a string "123456"

                    var request = new XMLHttpRequest();
                    request.open("POST", LocalURL);
                    request.setRequestHeader("origin", "http://127.0.0.1")
                    console.log(formData)
                    request.send(formData);
                }
                function SumbitVote(){
                    let Kandidat = document.getElementById("KanditatDropBox").value;
                    let KandidatID = KanditatDictionairy[Kandidat]
                    let Token = document.getElementById("TokenInput").value;

                    let Request = SendData(Token, KandidatID)

                    console.log("Sent request stem " + Kandidat + " ID " + KandidatID + " Token " + Token)
                }
                //Event
                function OnClick1Button(Klasse){
                    console.log(Klasse);
                    DisplayInfo(Klasse)
                };
                function OnClick1Button2(Klasse){
                    console.log(Klasse);
                    OpenStemPage(Klasse)
                };
                function OnClick1Button3(){
                    SumbitVote()
                };
            </script>
            <p class="Kanditater-Title2" id="Kanditat-Titel">Kanditater</p>
            <hr id="Higlight-Line1">
            <p class="Kanditat-Navn" id="Navn1" ></p>
            <p class="Slagord" id="Slagord1"></p>
            <img src="" class="Kanditat-Img" id="Img1" alt="IMG_Kanditat">
            <p class="Kandidat-Desc" id="Bio1"></p>
            <button onclick="OnClick1Button2('')" type="button-stem">Stem</button>
            <hr id="Higlight-Line2">
            <p class="Kanditat-Navn" id="Navn2"></p>
            <p class="Slagord" id="Slagord2"></p>
            <img src="" class="Kanditat-Img" id="Img2" alt="IMG_Kanditat">
            <p class="Kandidat-Desc" id="Bio2"></p>
            <button onclick="OnClick1Button2('IMST')" type="button-stem">Stem</button>
        </ul>
    </div>
</body>
</html>