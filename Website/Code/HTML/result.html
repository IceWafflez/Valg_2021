<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../Code/CSS/result.css">
    <title>Resultat</title>
</head>

<body>
    <div id="header"><h1>Resultater:</h1></div>
    <div class="container">
        <div class="it">
            <div class="klasse"><H1>Jaime:</H1></div>
            <div class="info" id="votes0"></div>
        </div>
        <div class="mp">
            <div class="klasse"><H1>Andreas:</H1></div>
            <div class="info" id="votes1"></div>
        </div>
        <div class="st">
            <div class="klasse"><H1>Lars</H1></div>
            <div class="info"id="votes2"></div>
        </div>
        <div class="it">
            <div class="klasse"><H1>Sondre:</H1></div>
            <div class="info" id="vote3"></div>
        </div>
        <div class="mp">
            <div class="klasse"><H1>Simen:</H1></div>
            <div class="info" id="votes4"></div>
        </div>
        <div class="st">
            <div class="klasse"><H1>Dino</H1></div>
            <div class="info" id="votes5"></div>
        </div>

 </div>
<script>


var HttpClient = function() {
    this.get = function(aUrl, aCallback) {
        var anHttpRequest = new XMLHttpRequest();
        anHttpRequest.onreadystatechange = function() { 
            if (anHttpRequest.readyState == 4 && anHttpRequest.status == 200)
                aCallback(anHttpRequest.responseText);
        }

        anHttpRequest.open( "GET", aUrl, true );            
        anHttpRequest.send( null );
    }
}

var client = new HttpClient();
client.get("http://stem-im.bakka.party:5000/results", function(response) {
    var info = JSON.stringify(response);
    var json = JSON.parse(info);
    for(var i = 0; i < json.length; i++) {
        var candidate = json[i];
        console.log(candidate)
        console.log("votes"+candidate["id"]);
        document.getElementById("votes"+candidate.id).innerHTML = String(candidate["votes"]);
    }
});
</script>
</body>
</html>